<link rel="stylesheet" href="../../css/contentstyle.css">
<div style="width: 95%; 
            color: #fff; 
            font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            text-align: justify;
            padding-top: 25px;
            padding-left: 2.5%">

    <h1>Добавление сцены, обзор структуры узлов.</h1>
    <br><h2>Добавление сцены</h2>
    <img src="imgs/SceneTree.png" align="right">
    <p>Теперь обратимся к доку «Дерево текущей сцены». Так как у нас нет сцены, то Вы уже заметили, что док отображает список корневых узлов, которые возможно создать на данном этапе в качестве сцены.</p>
    <p>Первые два пункта нам понятны – это пространства, в которых мы будем работать. Два оставшихся пункта вызывают вопросы.</p>
    <p>Пункт «Пользовательский интерфейс» заведёт основным узлом «Control», который отвечает за положение элементов на экране и управление ими. Такими могут быть как меню, так и какие-то информационные панели (например, шкала здоровья или прицел).</p>
    <p>Пункт «Другой узел» позволяет нам создать какой-ибо игровой ассет, который мы будем использовать в других сценах. Таким, например, может быть наш главный герой, который используется в разных сценах на протяжении всей игры.</p>
    <p>
        Важный нюанс – при изменении какой-либо собственно созданной сцены (того же пользовательского интерфейса) 
        будут изменяться все объекты этой сцены, которые присутствуют в других сценах. 
        Так, например, создав персонажа один раз вы его используете во многих сценах, 
        и если вам не понравилось его поведение – не нужно его изменять в каждой сцене, 
        достаточно изменить сцену этого самого персонажа.
    </p>
    <p>Выберем пункт «2D сцена», так как мы будем работать в 2D-пространстве. 
        Видим, что у нас создалась сцена, и корневым узлом сцены является «Node2D». 
        Сам по себе узел «Node2D» использует только 2D преобразования – позиция, масштаб, поворот и т.д., 
        а так же несколько параметров необходимых для всех дочерних 2D узлов. 
        Для того чтобы нам не проверять работоспособность пустой сцены – добавим какой-либо объект на 
        сцену. Для этого в доке «Дерево текущей сцены» нажмём на значок «+». Откроется менеджер 
        добавления узлов. Здесь отображаются все доступные для создания типы узлов. 
        Годо строится на принципе ООП – из здесь присутствующих улов является классом. 
        Представлены узлы в виде иерархии. В самом верху мы можем видеть основной узел – Node. 
        При его сокрытии скроются все оставшиеся узлы. Это означает, что узел «Node» является 
        родителем для всех остальных узлов, и содержит основные свойства и методы, которыми 
        обладает каждый из дочерних ему узлов. Дочерние элементы способны переопределять свойства и 
        методы родительского узла. Так, например, узел «CanvasItem» содержит особый код для отрисовки 
        2D графики. Если мы его раскроем, то увидим ущё два дочерних узла - «Control», и «Node2D». 
        Это значит, что оба этих дочерних узла способны существовать как самостоятельные, но содержат в 
        себе свойства и методы от узлов «CanvasItem» и «Node». На данный момент нам необходим узел 
        «Sprite». Его можно найти двумя способами:
    </p><ol>
        <li>раскрыть Node -> CanvasItem -> Node2D, и там найти узел «Sprite».</li>
        <li>над иерархией узлов есть строка поиска. Впишем туда Sprite, и движок нам сам покажет необходимый нам узел.</li>
    </ol>
    <p>Добавим узел на сцену при помощи кнопки «Создать».</p>
    <div class="imagediv"><img src="imgs/AddNode.png"></div>
    <p>После проделанных действий в доке «Дерево текущей сцены» будет добавлен узел «Sprite», который является дочерним по отношению к узлу «Node2D». </p>
    <br><h2>Редактирование узла, добавление скрипта.</h2>
    <p>Теперь обратим внимание на док «Инспектор/Узел». В данный момент у нас выделен узел «Sprite», а соответственно в инспекторе отображаются его доступные для изменения параметры. Давайте изменим параметр «Texture». Для этого кликаем на соответствующее поле в инспекторе, и выберем один из предложенных вариантов. В данном случае нам нужно не создавать новый объект текстуры, а загрузить уже имеющееся изображение – выбираем последний пункт «Load» («Загрузить»), и в открытом окне выбираем файл изображения - «icon.png».</p>
    <div class="imagediv"><img src="imgs/AddSpriteImage.png"></div>
    <p>Происходит чудо – во вьюпорте добавлена картинка. Теперь наша сцена не пуста. Прежде чем запустить сцену – её надо сохранить. В главном меню редактора нажимаем «Сцена» -> «Сохранить сцену». В появившемся окне вводим название для нашей сцены, и нажимаем «Сохранить». Теперь можно её запустить. В кнопках тестирования нажимаем кнопку запуска, которая нам предложит выбрать главную сцену – ту, с которой будет начинаться ваша игра. Мы можем выбрать какую-то определённую сцену, а моем нажать «выбрать текущий», указав что главной будет та сцена, в которой мы находимся. Если вы сделали несколько сцен, и у вас уже определена главная сцена, то можно протестировать сцену отдельно, нажав на значок тестирования сцены.</p>
    <div class="imagediv"><img src="imgs/TestingButtons.png"></div>
    <p>При запуске проекта мы видим, что наш спрайт выходит за пределы сцены. Давайте это исправим. Вы можете это сделать двумя способами:</p>
    <ul>
        <li>На объекте зажать и удерживать левую кнопку мыши, после чего перетащить объект в нужное место и отпустить кнопку.</li>
        <li>Воспользоваться кнопками специального назначения на верхней панели вьюпорта. </li>
    </ul>
    <p>Второй способ зачастую больше подходит для группы объектов, либо особого взаимодействия с объектами. Рассмотрим функциональные кнопки подробнее:</p>
    <div class="imagediv"><img src="imgs/FuncButtons.png" style="scale:0.95"></div>
    <ol>
        <li><b>Стандартный курсор</b> - универсальный инструмент для множества простых манипуляций.</li>
        <li><b>Позиционирование</b> - перемещение объекта в пространстве.</li>
        <li><b>Поворот</b> - поворот объекта вокруг Pivot Point (точка поворота).</li>
        <li><b>Растяжение</b> - изменение размера объекта.</li>
        <li><b>Список</b> - показывает список объектов, которые попадают в фокус выделения.</li>
        <li><b>Pivot Point</b> - позволяет указать точку вращения, относительно которой производятся трансформации объекта.</li>
        <li><b>Режим осмотра</b> - позволяет осмотреть содержимое вьюпорта изменяя обзор.</li>
        <li><b>Измерение</b> - позволяет измерить какое-либо расстояние.</li>
        <li><b>Умная привязка</b> - выравнивание объектов относительно друг друга.</li>
        <li><b>Привязка к сетке</b> - позволяет выравнивать объекты привязкой к сетке сцены.</li>
        <li><b>Параметры привязки</b> - позволяет настроить привязку.</li>
        <li><b>Фиксация объекта</b> - позволяет заблокировать любые действия над объектом.</li>
        <li><b>Группировка</b> - блокирует выбор дочерних объектов. При попытке выделить или воздействовать на дочерний объект операции автоматически применяются к родителю.</li>
        <li><b>Опции скелета</b> - пригодится при работе со скелетами.</li>
        <li><b>Переопределение игровой камеры</b> - заменяет камеру запущенного проекта на вид вьюпорта.</li>
        <li><b>Вид</b> - изменение настроек отображения во вьюпорте.</li>
    </ol>
    <p>Данные кнопки призваны облегчить процесс разработки, но в данный момент мы воспользуемся кнопкой позиционирования объекта, и перенесём наш спрайт в нужное нам место. Запускаем сцену для тестирования, соглашаемся с требованием сохранить, и теперь наш объект вмещается на экран, но при этом он не способен что-либо делать.</p>
    <img src="imgs/ScriptCreating.png" align="left">
    <p>Чтобы заставить наш объект что-то делать – нам нужно его запрограммировать. Для этого есть встроенный скриптовой язык GDScript. Для создания скрипта мы можем воспользоваться так же двумя вариантами:</p>
    <ol>
        <li>В файловой системе проекта кликнуть левой кнопкой мыши в пустом месте, и выбрать «создать скрипт». Обратите внимание, так как мы планируем его привязать к объекту узла «Sprite», в пункте «Наследует» нам нужно указать узел «Sprite» (Рис. 14). Называем скрипт по своему, и сохраняем, после чего перетаскиваем его на наш узел «Sprite» в дереве текущей сцены. После этого рядом с именем узла отобразится значок скрипта – кликните на него.</li>
        <li>В дереве текущей сцены выделить объект, после чего нажать кнопку прикрепления скрипта в меню дерева текущей сцены. Обратите внимание, в данном случае вам становится доступна опция «встроенный скрипт». Это значит, что в файловой системе текущего проекта не будет создаваться файла скрипта, так как скрипт будет встроен в узел, которому он принадлежит. Называем скрипт по-своему (родитель уже определён от объекта), и нажимаем «создать».</li>
    </ol>
    <hr>
    <i>Если вы ранее уже создавали скрипт – его можно привязать к объекту просто претащив его мышью из дока «Файловая система проекта» в док «Дерево текущей сцены» на необходимый объект.</i>
    <hr>
    <p>После этих манипуляций откроется редактор скриптов. Не пугайтесь, Вы всегда можете вернуться назад на сцену сменив рабочее пространство на панели сверху.
        Теперь можно заставить наш объект что-то посчитать, сказать, либо сдвинуться с места и реагировать на окружающую его среду. Переходим к скриптингу.
    </p>
    <br>
</div>